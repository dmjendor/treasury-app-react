# Party Treasury – UI & Styling Rules (UI_STYLE.md)

These rules apply to all UI, components, and styling generated by Codex.

---

## Tailwind and theming

- Styling uses Tailwind with theme color scales backed by CSS variables (OKLCH).
- Theme palettes include (but are not limited to):
  - `primary`
  - `accent`
  - `danger`
  - `warning`
  - `surface`
- Numeric steps (50–900) are used to create depth and contrast.
- All themes support both light and dark presentation via semantic role mapping.

---

## Semantic color usage (preferred)

- **Semantic aliases are allowed and preferred** over raw numeric tokens.
- Common semantic variables include:
  - `--bg`, `--fg`
  - `--card`, `--card-fg`
  - `--input`, `--input-fg`
  - `--muted-fg`
  - `--border`
  - button roles such as:
    - `--btn-primary-bg`
    - `--btn-primary-fg`
    - `--btn-accent-bg`
- Semantic aliases resolve to numeric theme tokens differently for light and dark themes.

### Rules for semantic aliases

- Semantic aliases **must be defined in** `/app/_styles/globals.css`.
- Do NOT invent or use semantic tokens ad hoc inside components.
- If a new semantic role is needed:
  - add it to `globals.css`
  - ensure it is mapped for both light and dark theme groups
  - then it may be used in components.

---

## Numeric token usage (allowed, but secondary)

- Direct usage of numeric theme tokens is allowed when appropriate:
  - `text-primary-900`
  - `bg-primary-700`
- Numeric tokens should be used when:
  - a component requires fine-grained contrast control
  - semantic roles are insufficient or too generic
- Avoid mixing numeric tokens and semantic aliases inconsistently within the same component.

---

## Muted text usage (restricted)

- Muted text should be used **sparingly** and intentionally.
- Muted text is for:
  - secondary hints
  - helper text
  - timestamps or metadata
  - low-priority labels
- Muted text is **not** for:
  - primary content
  - table values
  - navigation labels
  - body copy
  - anything the user needs to read quickly or repeatedly

### Rules

- Default text should use the normal foreground (`--fg` or equivalent).
- Muted text must remain readable and should never appear disabled unless it actually is.
- Do not stack muted text on muted backgrounds.
- Avoid using muted text as a layout crutch to reduce visual weight.

If a component looks “too loud,” adjust:

- spacing
- hierarchy
- font size
- layout

Do **not** default to muted text as the solution.

## Class usage rules

- DO NOT invent utility classes.
- If unsure whether a class or token exists, check:
  - `/app/_styles/globals.css`
- Do NOT assume a semantic alias exists unless it is explicitly defined there.

---

## Color usage guidelines

- Prefer semantic roles for:
  - layout backgrounds
  - cards and panels
  - standard text and muted text
- Use numeric steps for:
  - emphasis
  - hierarchy
  - edge cases requiring precise contrast
- Do not default everything to `primary`.
  1

## Buttons and links – variants (required)

- `Button` and `LinkButton` must **always** be given an explicit `variant`.
  - Do not rely on component defaults.

### Variant defaults

- Use `accent` for the primary call to action on a screen or panel.
- Use `primary` for standard actions that should still feel important.
- Use `danger` only for destructive actions (delete, remove, revoke, archive when irreversible).
- Use `outline` sparingly.
  - `outline` is for low-attention, secondary, or optional actions only.
  - Do not default to `outline` as a “safe” styling choice.
- If multiple buttons exist:
  - exactly one should usually be `accent` (the main action)
  - others should be `primary` or `outline` depending on priority
- If unsure which variant to use, choose `accent` for the main action and `primary` for the rest.

### Links vs buttons

- Use `LinkButton` for navigation.
- Use `Button` for actions/mutations.

## Cards and nested cards

- All card-like containers must use the `Card` component.
- Do not recreate card styling using raw `div` elements and `bg-card`.

### SubCards (cards within cards)

- Cards that appear inside other cards must use the `SubCard` component.
- Do not nest `Card` components inside other `Card` components.
- `SubCard` uses the `subcard` semantic role:
  - `bg-subcard`
  - `text-subcard-fg`
  - `border-subcard-border`
- Do not apply `bg-card` to nested cards.

### Rationale

- `Card` establishes the primary content container.
- `SubCard` establishes visual hierarchy within a card using accent-based color.
- This prevents flat or muddy layouts and ensures consistent depth across themes.

### Deep nesting (rare)

- Deep nesting should be avoided when possible.
- If additional nesting is required, alternate container types by depth:
  - Level 1: `Card`
  - Level 2: `SubCard`
  - Level 3: `Card`
  - Level 4: `SubCard`
- Do not place the same container type directly inside itself (`Card` in `Card`, `SubCard` in `SubCard`) unless explicitly justified.
- Keep nesting shallow (prefer 2 levels). If more is needed, consider a layout change (panels, sections, or tabs) instead of more nesting.

## Section headers (preferred over deep nesting)

- Use section headers to group related content inside cards.
- Prefer section headers over additional Card/SubCard nesting.
- Section headers provide hierarchy through:
  - spacing
  - typography
  - layout
- Section headers should not introduce new background colors.

Use `SectionHeader` for:

- content grouping
- labeled areas inside cards
- sections that do not warrant their own card container

## SectionDivider usage

- `SectionDivider` is optional and should be used **sparingly**.
- Prefer spacing (`mt-*`, `mb-*`, `gap-*`) over dividers for most layout separation.

### When to use SectionDivider

Use `SectionDivider` only when:

- a card contains **two or more distinct sections** that benefit from a clear visual boundary
- the content is **dense** (tables, lists, multiple controls) and spacing alone is not enough
- separating “details” from “actions” or “summary” from “breakdown”
- the sections are likely to be scanned independently (e.g., “Holdings” and “Recent Changes”)

### When NOT to use SectionDivider

Do not use `SectionDivider` for:

- every list item
- between a header and its content (use `SectionHeader` spacing instead)
- shallow cards with a single purpose
- nested content where a divider would create visual clutter

### Placement rules

- Place dividers **between sections**, not at the top or bottom of a card.
- Use at most **one divider per card** in most cases.
- If you need multiple dividers, reconsider the layout:
  - split into separate `Card` / `SubCard`
  - or use multiple `SectionHeader` groups with spacing

### Default spacing

- Divider should be paired with comfortable spacing, typically:
  - content block → `SectionDivider` → next content block
- Do not reduce padding just because a divider exists.

## Sections

A `Section` is a semantic container used for page structure and grouping.

### Mandatory usage

- Do not use raw `<section>` tags for styled containers.
- Use the shared `Section` component instead of `<section>` whenever:
  - any background, border, radius, padding, or spacing is applied
  - the container visually reads like a panel, block, or card-adjacent group
  - the container is used to group multiple UI elements or subsections

### Raw section tags (allowed only when unstyled)

- Raw `<section>` tags are allowed only for semantics when they are essentially unstyled:
  - no `bg-*`, `border-*`, `rounded-*`, `shadow-*`, or padding utilities
  - layout-only classes such as `mt-*`, `mb-*`, `space-y-*`, `grid`, `flex`, `gap-*` are allowed

### Styling rules

- `Section` must use the semantic tokens:
  - `bg-section-bg`
  - `text-section-fg`
  - `border-section-border`
- Do not style sections using `bg-card`, `text-card-fg`, or similar direct card roles.
- Do not use arbitrary values (e.g. `bg-[var(--section-bg)]`) when `bg-section-bg` exists.

### Relationship to Card/SubCard

- If the container visually looks like a card, use `Card` or `SubCard`.
- If the container is structural grouping (page sections, grouped content areas), use `Section`.
- Nested card rules still apply inside `Section`.

### Enforcement

- Any PR introducing a styled `<section>` tag must be changed to use `Section`.
- If the `Section` component is missing a needed variant or role, add the semantic role to `globals.css` and update `Section`, do not bypass it with inline classes.
